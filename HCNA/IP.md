 https://www.bilibili.com/video/BV1Dg4y187bZ?p=14 

# IP因特网协议

## 前言

网络层位于数据链路层与传输层之间。网络层中包含了很多协议，其中最为重要的协议就是IP协议。网络层提供了IP路由功能。理解IP路由除了要熟悉IP协议的工作机制之外，还必须理解IP编址以及如何合理地使用IP地址来设计网络。

## IP地包头结构

![1595508511926](IP.assets/1595508511926.png)

![1595508323654](IP.assets/1595508323654.png)

**版本**：4/6	(ipv4/ipv6)

**头部长度**：5	(固定长度20)

**总长度**：包头长度+上层数据长度(传输层)

**标识**：0xa74e	(当出现分包的时候，通过标识区分)

**分段标志**：

* 保留：
* 分段：点亮 不要分段
* 更多分段：点亮 后面还有分段

**分段偏移量**： 0    （第一个包就是0，第二个就是1480）

**存活时间(TTL)**：

* 防止IP数据包在网络内无休止地传输(环路)

* 每经过一次路由TTL值就会减1

* 当TTL=0的时候，丢弃数据包

  ![1595521062649](IP.assets/1595521062649.png)

  ![1595521132690](IP.assets/1595521132690.png)

* 利用TTL特性，可以实现路由跟踪计算，排错的重要方法之一。

  相关命令：ping -i 或tracert -d

  